---
import { render, type CollectionEntry } from 'astro:content';
import { Icon } from 'astro-icon/components'
import TitledSection from '../ui/TitledSection.astro';

interface Props {
  about: CollectionEntry<'about'>;
}

const { about } = Astro.props;
const { Content } = await render(about);
---

<section>
	<header>
		<h1>{about.data.name}</h1>
		<h2>{about.data.role}</h2>
	</header>
	<TitledSection title="About Me" id="about">
		<div class="paragraphs">
			<Content />
		</div>
		<div class="social-links" role="group" aria-label="Social links">
			{about.data.links.map((link) => (
				<a href={link.url} target="_blank" rel="noopener noreferrer">
					<Icon name={link.icon} size={20} />
				</a>
			))}
		</div>
	</TitledSection>
</section>

<style>
	section {
		display: flex;
		flex-direction: column;
		gap: 2rem;
	}

	header {
		display: flex;
		flex-direction: column;
		gap: 0.5rem;

		h1 {
			color: var(--color-text-secondary);
			font-size: 2.5rem;
			font-weight: 600;
		}

		h2 {
			color: var(--color-text-primary);
			font-size: 1.2rem;
		}
	}

	.paragraphs {
		display: flex;
		flex-direction: column;
		gap: 1rem;

		p {
			color: var(--color-text-secondary);
		}
	}

	.social-links {
		display: flex;
		flex-direction: row;
		gap: 0.5rem;

		a {
			display: inline-flex;
			padding: 0.5rem 0.5rem;
			border-radius: 0.5rem;
			background-color: var(--color-surface-chip);
			color: var(--color-text-chip);
			transition: background-color 0.2s, color 0.2s, transform 0.1s;

			&:hover,
			&:focus {
				background-color: var(--color-purple-dark);
				color: var(--color-white);
				transform: translateY(-1px);
				outline: none;
			}

			&:active {
				transform: translateY(0);
			}
		}
	}
</style>
